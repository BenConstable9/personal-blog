<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Flake Changed Python Files Only On PR | Ben Constable | Personal Blog</title>
<meta name=keywords content="Azure DevOps,Python,Flake8"><meta name=description content="Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?
In certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:"><meta name=author content="Me"><link rel=canonical href=https://www.benconstable.dev/posts/flake-changed-python-files-only-on-pr/><link crossorigin=anonymous href=/assets/css/stylesheet.bf5f9f73cf17311d52cedbcda82c922e91b2f566d88a85ad9f5b5a08b586bd5f.css integrity="sha256-v1+fc88XMR1SztvNqCySLpGy9WbYioWtn1taCLWGvV8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.benconstable.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.benconstable.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.benconstable.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://www.benconstable.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.benconstable.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Flake Changed Python Files Only On PR"><meta property="og:description" content="Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?
In certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:"><meta property="og:type" content="article"><meta property="og:url" content="https://www.benconstable.dev/posts/flake-changed-python-files-only-on-pr/"><meta property="og:image" content="https://www.benconstable.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-24T15:31:44+01:00"><meta property="article:modified_time" content="2023-04-24T15:31:44+01:00"><meta property="og:site_name" content="Ben Constable"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.benconstable.dev/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Flake Changed Python Files Only On PR"><meta name=twitter:description content="Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?
In certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.benconstable.dev/posts/"},{"@type":"ListItem","position":3,"name":"Flake Changed Python Files Only On PR","item":"https://www.benconstable.dev/posts/flake-changed-python-files-only-on-pr/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Flake Changed Python Files Only On PR","name":"Flake Changed Python Files Only On PR","description":"Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?\nIn certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:","keywords":["Azure DevOps","Python","Flake8"],"articleBody":"Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?\nIn certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:\n1. Setting Shallow Fetch When a PR is created in Azure DevOps, a merge branch containing all the modifications in a single commit is generated. However, by default, only the merge commit is downloaded. To enable the generation of the difference by downloading the previous state of the target branch, set the ShallowFetchDepth to 2.\nvariables: - name: Agent.Source.Git.ShallowFetchDepth value: 2 2. Setting Up Python Requirements Set up a Python environment with your testing requirements from requirements-test.txt. In this instance, requirements-test.txt only contains Flake8 and Flake8_junit.\n- task: UsePythonVersion@0 displayName: \"Use Python 3.9\" inputs: versionSpec: 3.9 architecture: \"x64\" - task: Powershell@2 displayName: \"Upgrade Pip\" inputs: targetType: \"inline\" script: \"python -m pip install --upgrade pip\" - task: Powershell@2 displayName: \"Install test requirements\" inputs: targetType: \"inline\" script: \"python -m pip install -r ./requirements-test.txt\" 3. Generating Differences \u0026 Flaking To flake only changed files, use git diff with xargs to pipe the result to the flaking command:\ngit diff HEAD~ HEAD generates the difference between the source branch and the target branch.\n–name-only filters to only return the name of the files changed.\n–diff-filter=ACMRT filters out any deleted files. Without this, if files are deleted during a PR, linting will fail as they do not exist.\nxargs -r is used to send the contents of $workingDirectoryChangedFiles to the linting command; in this case, we are using Flake8 with a redirection to an output file*–no-run-if-empty (-r)* is used to prevent Flake8 from failing.\nVariable PythonFilesChanged is set to ensure that if no Python files are included in the PR, further tasks that use the generated report do not fail.\n- task: Powershell@2 displayName: \"Validate Flake8 Compliance\" condition: and(succeeded(), eq(variables['Build.Reason'], 'PullRequest')) inputs: targetType: \"inline\" script: | mkdir $(Pipeline.Workspace)/lint-tests $workingDirectoryChangedFiles = $(git diff --name-only --diff-filter=ACMRT HEAD~ HEAD | grep -i \"*\\.py$\") echo $workingDirectoryChangedFiles | xargs -r -t flake8 --tee --output-file $(Pipeline.Workspace)/lint-tests/lint-results.txt if($workingDirectoryChangedFiles.Length -gt 0) { Write-Output \"##vso[task.setvariable variable=PythonFilesChanged]True\" } else { Write-Output \"##vso[task.setvariable variable=PythonFilesChanged]False\" } workingDirectory: \"$(Build.Repository.LocalPath)\" 4. Generating Reports Azure DevOps supports including test results in PR summaries, which allows for clear visualization of the report results without needing to dive into the pipeline runs. A report can be generated and published via:\nflake8_junit converts the Flake8 output file into a JUnit format that is readable by Azure DevOps.\nPublishTestResults@2 uploads the generated XML file to Azure DevOps and publishes it once the pipeline is completed.\n- task: Powershell@2 displayName: \"Generate Flake8 Report\" condition: and(succeeded(), or(ne(variables['Build.Reason'], 'PullRequest'), eq(variables['PythonFilesChanged'], True))) inputs: targetType: \"inline\" script: \"flake8_junit $(Pipeline.Workspace)/lint-tests/lint-results.txt $(Pipeline.Workspace)/lint-tests/lint-results.xml\" workingDirectory: \"$(Build.Repository.LocalPath)\" - task: PublishTestResults@2 displayName: \"Publish Flake8 Report\" condition: and(succeeded(), or(ne(variables['Build.Reason'], 'PullRequest'), eq(variables['PythonFilesChanged'], True))) inputs: testResultsFormat: \"JUnit\" testResultsFiles: \"$(Pipeline.Workspace)/lint-tests/lint-results.xml\" mergeTestResults: false failTaskOnFailedTests: false testRunTitle: \"Python Flake8\" 5. Adding Branch Policies Add a build validation step referencing the YAML pipeline to automatically run this on future PRs.\nNow, PRs containing Python files are automatically run through Flake8 without linting the entire repository.\n","wordCount":"550","inLanguage":"en","datePublished":"2023-04-24T15:31:44+01:00","dateModified":"2023-04-24T15:31:44+01:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.benconstable.dev/posts/flake-changed-python-files-only-on-pr/"},"publisher":{"@type":"Organization","name":"Ben Constable | Personal Blog","logo":{"@type":"ImageObject","url":"https://www.benconstable.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.benconstable.dev accesskey=h title="Ben Constable | Data & AI (Alt + H)">Ben Constable | Data & AI</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.benconstable.dev/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.benconstable.dev>Home</a>&nbsp;»&nbsp;<a href=https://www.benconstable.dev/posts/>Posts</a></div><h1 class=post-title>Flake Changed Python Files Only On PR</h1><div class=post-meta>&lt;span title='2023-04-24 15:31:44 +0100 BST'>April 24, 2023&lt;/span>&amp;nbsp;·&amp;nbsp;3 min&amp;nbsp;·&amp;nbsp;550 words&amp;nbsp;·&amp;nbsp;Me</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#1-setting-shallow-fetch>1. Setting Shallow Fetch</a></li><li><a href=#2-setting-up-python-requirements>2. Setting Up Python Requirements</a></li><li><a href=#3-generating-differences--flaking>3. Generating Differences & Flaking</a></li><li><a href=#4-generating-reports>4. Generating Reports</a></li><li><a href=#5-adding-branch-policies>5. Adding Branch Policies</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Have you ever needed to run linting or Flake8 only on specific Python files during build validation checks on Pull Requests (PRs) in Azure DevOps?</p><p>In certain situations, such as implementing Flake8 on a pre-existing large-scale project, you may only want to enforce Flake8 checks on the modified files in a PR. By utilizing Azure DevOps and Git Difference, Flake8 (or any other linting tool!) can be restricted to designated files by following the steps outlined below:</p><h3 id=1-setting-shallow-fetch>1. Setting Shallow Fetch<a hidden class=anchor aria-hidden=true href=#1-setting-shallow-fetch>#</a></h3><p>When a PR is created in Azure DevOps, a merge branch containing all the modifications in a single commit is generated. However, by default, only the merge commit is downloaded. To enable the generation of the difference by downloading the previous state of the target branch, set the ShallowFetchDepth to 2.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>variables</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Agent.Source.Git.ShallowFetchDepth</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>value</span>: <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><h3 id=2-setting-up-python-requirements>2. Setting Up Python Requirements<a hidden class=anchor aria-hidden=true href=#2-setting-up-python-requirements>#</a></h3><p>Set up a Python environment with your testing requirements from <em>requirements-test.txt</em>. In this instance, <em>requirements-test.txt</em> only contains Flake8 and Flake8_junit.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>task</span>: <span style=color:#ae81ff>UsePythonVersion@0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Use Python 3.9&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>versionSpec</span>: <span style=color:#ae81ff>3.9</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>architecture</span>: <span style=color:#e6db74>&#34;x64&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>Powershell@2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Upgrade Pip&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>targetType</span>: <span style=color:#e6db74>&#34;inline&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>script</span>: <span style=color:#e6db74>&#34;python -m pip install --upgrade pip&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>Powershell@2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Install test requirements&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>targetType</span>: <span style=color:#e6db74>&#34;inline&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>script</span>: <span style=color:#e6db74>&#34;python -m pip install -r ./requirements-test.txt&#34;</span>
</span></span></code></pre></div><h3 id=3-generating-differences--flaking>3. Generating Differences & Flaking<a hidden class=anchor aria-hidden=true href=#3-generating-differences--flaking>#</a></h3><p>To flake only changed files, use <em>git diff</em> with <em>xargs</em> to pipe the result to the flaking command:</p><ul><li><p><em>git diff HEAD~ HEAD</em> generates the difference between the source branch and the target branch.</p></li><li><p><em>&ndash;name-only</em> filters to only return the name of the files changed.</p></li><li><p><em>&ndash;diff-filter=ACMRT</em> filters out any deleted files. Without this, if files are deleted during a PR, linting will fail as they do not exist.</p></li><li><p><em>xargs -r</em> is used to send the contents of <em>$workingDirectoryChangedFiles</em> to the linting command; in this case, we are using Flake8 with a redirection to an output file*&ndash;no-run-if-empty (-r)* is used to prevent Flake8 from failing.</p></li><li><p>Variable <em>PythonFilesChanged</em> is set to ensure that if no Python files are included in the PR, further tasks that use the generated report do not fail.</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>task</span>: <span style=color:#ae81ff>Powershell@2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Validate Flake8 Compliance&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>and(succeeded(), eq(variables[&#39;Build.Reason&#39;], &#39;PullRequest&#39;))</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>targetType</span>: <span style=color:#e6db74>&#34;inline&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>script</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mkdir $(Pipeline.Workspace)/lint-tests
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        $workingDirectoryChangedFiles = $(git diff --name-only --diff-filter=ACMRT HEAD~ HEAD | grep -i &#34;*\.py$&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        echo $workingDirectoryChangedFiles | xargs -r -t flake8 --tee --output-file $(Pipeline.Workspace)/lint-tests/lint-results.txt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        if($workingDirectoryChangedFiles.Length -gt 0) {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Write-Output &#34;##vso[task.setvariable variable=PythonFilesChanged]True&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        } else {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            Write-Output &#34;##vso[task.setvariable variable=PythonFilesChanged]False&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        workingDirectory: &#34;$(Build.Repository.LocalPath)&#34;</span>        
</span></span></code></pre></div><h3 id=4-generating-reports>4. Generating Reports<a hidden class=anchor aria-hidden=true href=#4-generating-reports>#</a></h3><p>Azure DevOps supports including test results in PR summaries, which allows for clear visualization of the report results without needing to dive into the pipeline runs. A report can be generated and published via:</p><ul><li><p><em>flake8_junit</em> converts the Flake8 output file into a JUnit format that is readable by Azure DevOps.</p></li><li><p><em>PublishTestResults@2</em> uploads the generated XML file to Azure DevOps and publishes it once the pipeline is completed.</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>task</span>: <span style=color:#ae81ff>Powershell@2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Generate Flake8 Report&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>and(succeeded(), or(ne(variables[&#39;Build.Reason&#39;], &#39;PullRequest&#39;), eq(variables[&#39;PythonFilesChanged&#39;], True)))</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>targetType</span>: <span style=color:#e6db74>&#34;inline&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>script</span>: <span style=color:#e6db74>&#34;flake8_junit $(Pipeline.Workspace)/lint-tests/lint-results.txt $(Pipeline.Workspace)/lint-tests/lint-results.xml&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>workingDirectory</span>: <span style=color:#e6db74>&#34;$(Build.Repository.LocalPath)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>task</span>: <span style=color:#ae81ff>PublishTestResults@2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>displayName</span>: <span style=color:#e6db74>&#34;Publish Flake8 Report&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>condition</span>: <span style=color:#ae81ff>and(succeeded(), or(ne(variables[&#39;Build.Reason&#39;], &#39;PullRequest&#39;), eq(variables[&#39;PythonFilesChanged&#39;], True)))</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>testResultsFormat</span>: <span style=color:#e6db74>&#34;JUnit&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>testResultsFiles</span>: <span style=color:#e6db74>&#34;$(Pipeline.Workspace)/lint-tests/lint-results.xml&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>mergeTestResults</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>failTaskOnFailedTests</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>testRunTitle</span>: <span style=color:#e6db74>&#34;Python Flake8&#34;</span>
</span></span></code></pre></div><h3 id=5-adding-branch-policies>5. Adding Branch Policies<a hidden class=anchor aria-hidden=true href=#5-adding-branch-policies>#</a></h3><p>Add a build validation step referencing the YAML pipeline to automatically run this on future PRs.</p><p>Now, PRs containing Python files are automatically run through Flake8 without linting the entire repository.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.benconstable.dev/tags/azure-devops/>Azure DevOps</a></li><li><a href=https://www.benconstable.dev/tags/python/>Python</a></li><li><a href=https://www.benconstable.dev/tags/flake8/>Flake8</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.benconstable.dev>Ben Constable | Personal Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>